<html>
<head>
  <style>

    header {
      background-color: #FFFFFF;
      top:0px;
    }
    #menu{
      width:80%;
      padding:10px;
      margin:auto;
    }
    body{
      background-color: #A26050;
      margin:0;
    }


    .signature_box{
      background-color:rgba(34.05810445547104, 29.23320695757866, 29.23320695757866, 0.8500000238418579);
	    width:32%;
	    min-height: 20%;
		  border-top-left-radius:10px;
		  border-top-right-radius:10px;
		  border-bottom-left-radius:10px;
		  border-bottom-right-radius:10px;
      position:absolute;
      z-index:5;
      color:white;
      text-align: center;
      padding: 1%;
    }

    .signature_info{
      font-size: 0.8em;
      margin: auto;
      color:rgba(255, 255, 255, 1);
	    text-align:center;
      padding:5%;
	    letter-spacing:0;
    }

    .signature_box img {
      width: 60%;
    }

    .signature_box a {
      color: #fff;
    }
    .relationship_box{
      background-color:rgba(34.05810445547104, 29.23320695757866, 29.23320695757866, 0.8500000238418579);
      width:15%;
      min-height: 15%;
      border-top-left-radius:10px;
      border-top-right-radius:10px;
      border-bottom-left-radius:10px;
      border-bottom-right-radius:10px;
      position:absolute;
      z-index:5;
      color:white;
      text-align: center;
      padding: 2%;


    }
    .relationship_info{
      font-size: 1em;
      margin: auto;
      color:rgba(255, 255, 255, 1);
      text-align:center;
      padding:5%;
      letter-spacing:0;
    }



    #bury{
      top:20px;
    }
    #container_top{
      display:block;
      margin:auto;
      position:relative;
      padding:25px;
    }
    #container_top h1 {
      font-size: 30px;
      color:white;
      text-align:center;
      margin:auto;
      align-content:center;
    }

    #container_bottom{
      background-color: #221D1D;
      margin:0;
    }

    #intro_text{
      color:white;
      width:85%;
      margin:auto;
      padding:40px;
    }

    .signature_box h3 {
      font-size: 1.5em;
      margin-bottom: 5px;
    }


    #book_pages{
      background-color: #4B4F54;
    }

    #container_book {
      position: relative;
      width: 70%;
      margin: auto;
      padding-bottom:20px;
    }

    #book_background {
      width: 100%;
      z-index: 0;
    }

    #book_signatures {
      position: absolute;
      top: 0px;
      left: 0px;
      z-index: 4;
    }

    .hidden {
      display: none;
    }

    #signature_hepburn {
      left: -18%;
      bottom: 5%;
    }

    #signature_nigel {
      right: -18%;
      top: 0px;
    }

    #signature_bury {
      left: -18%;
      top: 0px;
    }
    #bury_and_nigel{
      right:10px;
      top:0px
    }
    #nigel_and_bury{
      left:-10px;
      top:0px
    }


/* CSS */
.btn {
  appearance: none;
  background-color: transparent;
  border: 1px solid #FFFFFF;
  border-radius: 30px;
  box-sizing: border-box;
  color: #FFFFFF;
  cursor: pointer;
  display: inline-block;


  font-size: 0.9em;

  line-height: normal;

  margin:5px;
  outline: none;
  padding: 5px;
  margin-bottom: 10px;
  text-align: center;
  text-decoration: none;
  transition: all 300ms cubic-bezier(.23, 1, 0.32, 1);
  user-select: none;
  -webkit-user-select: none;


  will-change: transform;
  z-index:5;
}

.btn:disabled {

}

.btn:hover {
  color: #221D1D;
  background-color: #FFFFFF;
  box-shadow: rgba(0, 0, 0, 0.25) 0 8px 15px;
  transform: translateY(-2px);
}

.btn:active {
  box-shadow: none;
  transform: translateY(0);
}

ul {
  list-style-type: none;
   margin: 0;
   padding: 0;
   overflow: hidden;

}
li {
    float: right;
}
li a {
    display: block;

    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
}
  </style>

</head>

<body>
  <header>
    <div id="menu">
    <h1 style="float:left;padding:0px;margin:0px;">
      GuestBook
    </h1>

    <nav id="site_navigation">
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#guestbook">Guestbook</a></li>
        <li><a href="#catalogue">Catalogue</a></li>
      </ul>
    </nav>
  </div>
</header>

  <div id="container_top">
    <h1>The Guests of Villa La Pietra</h1>
  </div>

  <div id="container_book">
    <img id="book_background" src="book.png">
    <svg id="book_signatures" viewBox="0 0 1558 1080" style="position:absolute;">
      <defs>
        <style>
          .cls-1 {
            opacity: 0;
          }
          .cls-1:hover {
            fill: #ff0;
            opacity: .25;
          }
        </style>
      </defs>
      <g id="signatures">
        <rect id="bury" class="cls-1" x="278" y="38" width="412" height="56"/>
        <rect id="nigel" class="cls-1" x="877" y="66" width="333" height="56"/>
        <rect id="hepburn" class="cls-1" x="278" y="892" width="412" height="43"/>
      </g>
    </svg>

    <svg  id="tags" viewBox="0 0 1558 1080" style="position:absolute;left:0px;">
      <defs>
        <style>
          .cls-2 {
            opacity: 0.25;
          }
          .cls-2:hover {
            fill: pink;
            opacity: 0.5;
          }
        </style>
      </defs>
      <g id="alltags">
        <rect  id="nigel_fromuk_artindustry" class="cls-2 hidden" x="877" y="66" width="333" height="56"/>
        <rect  id="hepburn_fromuk_entertainment_philanthropy" class="cls-2 hidden" x="278" y="892" width="412" height="43"/>
      </g>
    </svg>




    <div class="signature_box" id="signature_bury">
      <h3>Bury</h3>
      <img src="arrow.png" style="position:absolute; left:100%; top:8%; width:8%; ">
      <img src="portraits/bury.png" alt="bury">
      <div class="signature_info">
        Nationality: British<br />
        Social Identity:
        9th Earl of Albemarle
      </div>
      <a href="google.com">More info...</a>
      <button class="btn" id="showRelation_bury" data-showing="false">Show Profession</button>
    </div>

    <div class="signature_box" id="signature_nigel">
      <h3>Nigel</h3>
      <img src="arrow.png" style="position:absolute; left:-8%; top:12%; width:8%;  transform: scaleX(-1);">
      <img src="portraits/bury.png" alt="bury">
      <div class="signature_info">
      Nationality: British
      Social Identity:
      9th Earl of Albemarle
      </div>
      <div><a href="" style="color:white;margin:5px;font-size:10px;">More info...</a></div>
      <button class="btn" id="showRelation_nigel" data-showing="false">Show Profession</button>
    </div>

    <div class="signature_box" id="signature_hepburn">
      <h3>Audrey Hepburn</h3>
      <div style='margin:10px;font-size: 0.9em;'>United Kingdom, 1929-1993</div>
      <img src="arrow.png" style="position:absolute; left:100%; top:82%; width:8%; ">
      <img src="portraits/hepburn.jpg" alt="hepburn">
      <div class="signature_info">

      Coming out of her success in the films Roman Holiday and Sabrina, rising star Audrey Hepburn was spotted mingling at the Villa La Pietra in Florence. After a stint as a chorus girl, she first found fame with the Broadway show, Gigi, and after winning numerous awards for her performances in film, has returned to the stage with her role in Ondine. There are whispers that Ms. Hepburn is seeing her handsome Ondine co-star, the former RKO Studios actor, Mel Ferrer. Do I hear wedding bells?

      </div>
      <div style="font-size: 0.75em; margin:5px;">Click the buttons to see people who share similar profession with Hepburn:</div>
      <button class="btn" id="showRelation_hepburn_fromuk" data-showing="false">From UK</button>
      <button class="btn" id="showRelation_hepburn_entertainment" data-showing="false">Entertainment</button>
      <button class="btn" id="showRelation_hepburn_philanthropy" data-showing="false">Philanthropy</button>
    </div>




  </div>

  <script>
    // get a ref to all signature links in the SVG
    let allSignatureLinks = document.querySelectorAll('#signatures rect');
    let showingRelationship = false;


    // hide all signature panels
    hideAllSignaturePanels();

    // move signature panels into their correct positions
    for (let i = 0; i < allSignatureLinks.length; i++) {
      //console.log(allSignatureLinks[i].id);

      const myPanelID = 'signature_' + allSignatureLinks[i].id;
      const myPanel = document.querySelector('#' + myPanelID);
      allSignatureLinks[i].onclick = function(e) {
        //if not showing relationship of other ppl


        //console.log(isOn)


          //only clickable and show profile when not showing relationship
          //update: no need to do the only clickable function
          //hide all relation panels when click another person
          hideAllRelationshipHighlights();

          // hide all other signature panels
          if (myPanel.classList.contains('hidden')) {
            hideAllSignaturePanels();
            hideAllRelationshipPanels();
            myPanel.classList.remove('hidden');
          } else {
            console.log("not hidden!")
            myPanel.classList.add('hidden');
          }

          console.log(e);
          console.log(myPanel);






      }

    }

    function hideAllSignaturePanels() {
      // also get a ref to all signature panels that need to be toggled
      let allSignaturePanels = document.querySelectorAll('.signature_box');
      for (let i = 0; i < allSignaturePanels.length; i++) {
        allSignaturePanels[i].classList.add('hidden');
      }
    }
    function hideAllRelationshipPanels() {
      // also get a ref to all signature panels that need to be toggled
      let allRelationshipPanels = document.querySelectorAll('rect.cls-2');
      for (let i = 0; i < allRelationshipPanels.length; i++) {
        allRelationshipPanels[i].classList.add('hidden');
      }
    }

    function hideAllRelationshipHighlights(){
      console.log("hideAllRelationshipHighlights")
      svgFiles = document.querySelectorAll('svg[id*="_relationships"]');
      console.log(svgFiles)
      svgFiles.forEach(svg => svg.classList.add("hidden"));

      buttons = document.querySelectorAll('button[id^="showRelation_"]');
      console.log(buttons)
      buttons.forEach(button => {
        button.dataset.showing = "false";

      });
    }



    // hide all signature panels
    hideAllRelationshipPanels();
    //relationship button!!
    let showRelationButton = document.querySelectorAll('.btn');
    // move signature panels into their correct positions
    for (let i = 0; i < showRelationButton.length; i++) {

    //  console.log(showRelationButton[i].id);
      const myButtonID = showRelationButton[i].id;
      const myButton = document.querySelector('#' + myButtonID);

      showRelationButton[i].onclick = function(e) {
        console.log(showRelationButton[i].id)
        let type_of_relation = showRelationButton[i].id.split("_").pop()
        console.log(type_of_relation)
        // example of relationship svg naming: hepburn_fromuk_entertainment_philanthropy
        let relationship_svg=document.querySelectorAll('rect[id*="' + type_of_relation + '"]')
        console.log(relationship_svg)
        //test

        //test
        isOn = showRelationButton[i].getAttribute('data-showing');
        if (isOn === "true") {
          showingRelationship=false;
          showRelationButton[i].style.backgroundColor = 'transparent';
          showRelationButton[i].style.color  = 'white';
          //showRelationButton[i].innerText = "show profession";
          showRelationButton[i].setAttribute('data-showing', 'false');
          hideAllRelationshipPanels();

          //TODO:dont hid all the elements, if other are still there?
          //or check across the elements again that if any has data-showing=true, remove their hidden class again?
          relationship_svg.forEach(element => {
            element.classList.add('hidden');})

        } else if (isOn === "false") {
          showingRelationship=true;
          showRelationButton[i].style.backgroundColor = 'white';
          showRelationButton[i].style.color  = '#221D1D';

          showRelationButton[i].setAttribute('data-showing', 'true');
          console.log("showing relationship!")
          console.log(myButtonID)
          hideAllRelationshipPanels();
          // do not remove all of the element, do not show if they share the same name, e.g. hupburn does not show herself
          relationship_svg.forEach(element => {
            if(element.id.split("_")[0]!=(myButtonID.split("_")[1])){
            element.classList.remove('hidden');}})
          //console.log(e);


          let allRelationshipLinks = document.querySelectorAll('#alltags rect');
          for (let i = 0; i < allRelationshipLinks.length; i++) {
            //console.log(allSignatureLinks[i].id);
            const myPanelID =  allRelationshipLinks[i].id;
            console.log(myPanelID);
            let temp =myPanelID.split('_')[0];
            console.log(temp)
            allRelationshipLinks[i].onclick = function(e) {
              let allRelationshipPanels= document.querySelectorAll('.relationship_box');
              for (let i = 0; i < allRelationshipPanels.length; i++) {
                if(allRelationshipPanels[i].id===myPanelID.split('_signature')[0]){
                  allRelationshipPanels[i].classList.remove('hidden');
                }
              }
            }

          }




          //TODO:let them show after user click
          let allRelationshipPanels= document.querySelectorAll('.relationship_box');
          for (let i = 0; i < allRelationshipPanels.length; i++) {

           console.log(allRelationshipPanels[i].id)
           console.log(myButtonID.substring(13))
           let arr = allRelationshipPanels[i].id.split("_and_");
           let name1 = arr[0];

           if (myButtonID.substring(13)===(name1)) {
             console.log("The string contains 'bury'");
             console.log(allRelationshipPanels[i].classList)
             allRelationshipPanels[i].classList.remove('hidden');
           } else {
             //allRelationshipPanels[i]classList.add('hidden');
           }


          }
        }
         // hide all other relationship panels

         //myButton.classList.remove('hidden');
      }

    }


  </script>





  <div id="container_bottom">
  <div id="intro_text">
  <p>The guests' identities may be analyzed in terms of different criteria (social and professional position, nationality etc.). From the first glance, the very cosmopolitan milieu of Florence during the period is apparent. Guests of the Actons included prominent figures in the world of architecture (e.g. Darcy Braddell and Dorothy (Busse) Braddell from Scotland); art history (Thomas Whittemore, founder of the Byzantine Institute of America); art collecting (Charles Loeser; Martin and Caroline Ryerson from Chicago; James Kerr Branch and Beulah (Gould) Branch who also owned a Villa in Fiesole); costume and set designers Umberto Brunelleschi and Gino Carlo Sensani. It is worth noticing that guests connected with literary endeavors were mostly contemporaries of the Actons' younger generation. In fact by having attended Eton and Oxford both Harold and William had befriended a literary coterie that included Harold's friends among the "Bright Young Things"-Brian Howard, Robert Byron and Evelyn Waugh-who would frequently visit Villa La Pietra, leaving behind their own inscribed books. Other 'literati' include Norman Douglas, Edith Sitwell, Somerset Maugham, Violet Trefusis, Reginald Turner, "rebel Boston Brahmin" John Brooks Wheelwright.
</p><p>
The elite of American and European capitalism frequently attended events at Villa La Pietra, where they compared notes about art collecting, home decoration and garden planning: Arthur and Hortense Acton were themselves involved in similar endeavors. A few names may help in recalling such visitors: Ada Small Moore, wife of W.H.Moore (US Steel); banker Jules Semon Bache; the Du Puys; Belgian industrialist and art collector Adolphe Stoclet - who had his celebrated Brussels home designed by Josef Hoffman and decorated by Gustav Klimt. Royalty are also among the Actons' guests (mainly from countries that had recently witnessed regime changes: such as Prussia, Serbia etc.). Socialites of different profiles were often among the guests at Villa La Pietra as well as the emerging 'stars' of the show business (Lina Cavalieri, Mistinguett).
</p>
</div>
<div id="book_pages">Other pages</div>
  </div>




</body>
</html>
